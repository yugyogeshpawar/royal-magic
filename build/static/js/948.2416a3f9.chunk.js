"use strict";(self.webpackChunkRoyal_Magic=self.webpackChunkRoyal_Magic||[]).push([[948],{4734:function(e,t,a){a.d(t,{Ez:function(){return x},LK:function(){return p},hN:function(){return k},jQ:function(){return T},mF:function(){return v},nU:function(){return b},rM:function(){return B},vD:function(){return R}});var s=a(6373),n=a(6573);let o=[],r=[],i=[],c=[],u=[],l=[],d=[],g=[];const f={stakingHistorySucess:!1,stakingSucess:!1,stakingBonusSucess:!1,refBonusSucess:!1,withdrawHisSuccess:!1,teamListSucess:!1,RefBonusSucess:!1,myRefferalSucess:!1,levelBonusSucess:!1,WithdrawSucess:!1},S={isLoading:!1,error:!1,users:[],stakingHistory:o},h=(0,s.oM)({name:"user",initialState:S,reducers:{startLoading(e){e.isLoading=!0},hasError(e,t){e.isLoading=!1,e.error=t.payload},getStackingSuccess(e,t){e.isLoading=!1,e.stakingHistory=t.payload},getTeamsSuccess(e,t){e.isLoading=!1,e.output=t.payload}}}),w={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_VERSION:"v1.0.1"}.PORT||"https://backend.royalmagic.live/api";h.reducer;const{onToggleFollow:y,deleteUser:m}=h.actions;async function p(){if(!f.teamListSucess)try{const e={Authorization:`Bearer ${window.localStorage.getItem("accessToken")}`,"Referrer-Policy":"unsafe-url"},t=await n.Z.get(`${w}/Team/MyTeam`,{headers:e});f.teamListSucess=!0,c=t.data}catch(e){console.log(e),f.teamListSucess=!1}return c}async function k(){if(!f.myRefferalSucess)try{const e={Authorization:`Bearer ${window.localStorage.getItem("accessToken")}`,"Referrer-Policy":"unsafe-url"},t=await n.Z.get(`${w}/Team/MyReferral`,{headers:e});l=t.data,f.myRefferalSucess=!0}catch(e){console.log(e),f.myRefferalSucess=!1}return l}async function R(){if(!f.levelBonusSucess)try{const e={Authorization:`Bearer ${window.localStorage.getItem("accessToken")}`,"Referrer-Policy":"unsafe-url"},t=await n.Z.get(`${w}/Earning/levelbonus`,{headers:e});f.levelBonusSucess=!0,d=t.data}catch(e){console.log(e),f.levelBonusSucess=!1}return d}async function T(){if(!f.RefBonusSucess)try{const e={Authorization:`Bearer ${window.localStorage.getItem("accessToken")}`,"Referrer-Policy":"unsafe-url"},t=await n.Z.get(`${w}/Earning/ReferralBonus`,{headers:e});f.RefBonusSucess=!0,u=t.data}catch(e){console.log(e),f.RefBonusSucess=!1}return u}async function v(){if(!f.withdrawHisSuccess)try{const e={Authorization:`Bearer ${window.localStorage.getItem("accessToken")}`,"Referrer-Policy":"unsafe-url"},t=await n.Z.get(`${w}/Withdraw/Summary`,{headers:e});console.log(t.data),f.withdrawHisSuccess=!0,i=t.data}catch(e){console.log(e),f.withdrawHisSuccess=!1}return i}async function B(){if(!f.stakingHistorySucess)try{const e={Authorization:`Bearer ${window.localStorage.getItem("accessToken")}`,"Referrer-Policy":"unsafe-url"},t=await n.Z.get(`${w}/Staking/Summary`,{headers:e});f.stakingHistorySucess=!0,o=t.data}catch(e){console.log(e),f.stakingHistorySucess=!1}return o}async function x(e){if(!f.stakingSucess)try{const t=window.localStorage.getItem("accessToken"),a=await(0,n.Z)({method:"post",url:`${w}/Staking/`,headers:{authorization:`Bearer ${t}`,"Content-Type":"application/json"},data:{wallerAddress:e.wallet,amount:e.staking,transactionHash:e.transactionHash}});f.stakingSucess=!0,r=a.data}catch(t){console.log(t),f.stakingSucess=!1,r=t}return r}async function b(e){if(!f.WithdrawSucess)try{const t=window.localStorage.getItem("accessToken"),a=await(0,n.Z)({method:"post",url:`${w}/Withdraw/Request`,headers:{authorization:`Bearer ${t}`,"Content-Type":"application/json"},data:{amount:e}});console.log(a),f.WithdrawSucess=!0,g=a.data}catch(t){console.log(t),f.WithdrawSucess=!1,g=t}return g}},2948:function(e,t,a){a.r(t),a.d(t,{default:function(){return f}});var s=a(7313),n=a(7829),o=a(4631),r=a(5480),i=a(9099),c=a(6244),u=a(4211),l=a(4285),d=a(4734),g=a(6417);function f(){const{user:e}=(0,l.Z)(),[t,a]=s.useState(0),[f,S]=s.useState(!1),[h,w]=s.useState(""),[y,m]=s.useState(!1),[p,k]=s.useState(!1);console.log(y);return(0,g.jsxs)(n.Z,{component:"form",noValidate:!0,autoComplete:"off",sx:{display:"flex",flexDirection:"column",background:"white",width:"fit-content",p:4,borderRadius:"20px"},children:[(0,g.jsx)(o.Z,{disabled:!0,id:"outlined-error-helper-text",label:"Wallet Balance",value:`$${null===e||void 0===e?void 0:e.wallet_amount}`,sx:{mt:2,width:{sm:200,md:300},"& .MuiInputBase-root":{}}}),(0,g.jsx)(o.Z,{id:"outlined-error-helper-text",label:"Withdraw Amount",helperText:f?"Incorrect entry.":"",error:f,type:"number",value:t,onChange:e=>{const t=parseInt(e.target.value);a(t),S(!1),w("")},sx:{mt:2,width:"300px"}}),f&&(0,g.jsx)(r.Z,{error:f,children:"Withdraw amount cannot exceed wallet balance or be negative."}),h&&(0,g.jsx)(r.Z,{error:!0,children:h}),(0,g.jsx)(i.Z,{variant:"contained",disableElevation:!0,sx:{mt:2,width:"200px"},onClick:async()=>{if(t>e.wallet_amount)S(!0);else if(t<0)S(!0);else try{await(0,d.nU)(t),m(!0),w(""),k(!0)}catch(f){w("Error submitting withdrawal request.")}},children:"Submit"}),(0,g.jsx)(c.Z,{open:p,autoHideDuration:3e3,onClose:()=>{k(!1)},anchorOrigin:{vertical:"bottom",horizontal:"left"},children:(0,g.jsx)(u.Z,{style:{backgroundColor:"green"},message:"Withdrawal request submitted successfully."})})]})}}}]);