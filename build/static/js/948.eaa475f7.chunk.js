"use strict";(self.webpackChunkRoyal_Magic=self.webpackChunkRoyal_Magic||[]).push([[948],{4734:function(e,t,a){a.d(t,{Ez:function(){return B},LK:function(){return p},hN:function(){return k},jQ:function(){return x},mF:function(){return T},nU:function(){return b},rM:function(){return v},vD:function(){return R}});var s=a(6373),r=a(6573);let n=[],o=[],i=[],c=[],u=[],l=[],d=[],g=[];const h={stakingHistorySucess:!1,stakingSucess:!1,stakingBonusSucess:!1,refBonusSucess:!1,withdrawHisSuccess:!1,teamListSucess:!1,RefBonusSucess:!1,myRefferalSucess:!1,levelBonusSucess:!1,WithdrawSucess:!1},f={isLoading:!1,error:!1,users:[],stakingHistory:n},S=(0,s.oM)({name:"user",initialState:f,reducers:{startLoading(e){e.isLoading=!0},hasError(e,t){e.isLoading=!1,e.error=t.payload},getStackingSuccess(e,t){e.isLoading=!1,e.stakingHistory=t.payload},getTeamsSuccess(e,t){e.isLoading=!1,e.output=t.payload}}}),w={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_VERSION:"v1.0.1"}.PORT||"https://backend.royalmagic.live/api";S.reducer;const{onToggleFollow:y,deleteUser:m}=S.actions;async function p(){if(!h.teamListSucess)try{const e={Authorization:`Bearer ${window.localStorage.getItem("accessToken")}`,"Referrer-Policy":"unsafe-url"},t=await r.Z.get(`${w}/Team/MyTeam`,{headers:e});h.teamListSucess=!0,c=t.data}catch(e){console.log(e),h.teamListSucess=!1}return c}async function k(){if(!h.myRefferalSucess)try{const e={Authorization:`Bearer ${window.localStorage.getItem("accessToken")}`,"Referrer-Policy":"unsafe-url"},t=await r.Z.get(`${w}/Team/MyReferral`,{headers:e});l=t.data,h.myRefferalSucess=!0}catch(e){console.log(e),h.myRefferalSucess=!1}return l}async function R(){if(!h.levelBonusSucess)try{const e={Authorization:`Bearer ${window.localStorage.getItem("accessToken")}`,"Referrer-Policy":"unsafe-url"},t=await r.Z.get(`${w}/Earning/levelbonus`,{headers:e});h.levelBonusSucess=!0,d=t.data}catch(e){console.log(e),h.levelBonusSucess=!1}return d}async function x(){if(!h.RefBonusSucess)try{const e={Authorization:`Bearer ${window.localStorage.getItem("accessToken")}`,"Referrer-Policy":"unsafe-url"},t=await r.Z.get(`${w}/Earning/ReferralBonus`,{headers:e});h.RefBonusSucess=!0,u=t.data}catch(e){console.log(e),h.RefBonusSucess=!1}return u}async function T(){if(!h.withdrawHisSuccess)try{const e={Authorization:`Bearer ${window.localStorage.getItem("accessToken")}`,"Referrer-Policy":"unsafe-url"},t=await r.Z.get(`${w}/Withdraw/Summary`,{headers:e});console.log(t.data),h.withdrawHisSuccess=!0,i=t.data}catch(e){console.log(e),h.withdrawHisSuccess=!1}return i}async function v(){if(!h.stakingHistorySucess)try{const e={Authorization:`Bearer ${window.localStorage.getItem("accessToken")}`,"Referrer-Policy":"unsafe-url"},t=await r.Z.get(`${w}/Staking/Summary`,{headers:e});h.stakingHistorySucess=!0,n=t.data}catch(e){console.log(e),h.stakingHistorySucess=!1}return n}async function B(e){if(!h.stakingSucess)try{const t=window.localStorage.getItem("accessToken"),a=await(0,r.Z)({method:"post",url:`${w}/Staking/`,headers:{authorization:`Bearer ${t}`,"Content-Type":"application/json"},data:{wallerAddress:e.wallet,amount:e.staking,transactionHash:e.transactionHash}});h.stakingSucess=!0,o=a}catch(t){console.log(t),h.stakingSucess=!1,o=t}return o}async function b(e,t){if(!h.WithdrawSucess)try{const a=window.localStorage.getItem("accessToken"),s=await(0,r.Z)({method:"post",url:`${w}/Withdraw/Request`,headers:{authorization:`Bearer ${a}`,"Content-Type":"application/json"},data:{amount:e,address:t}});console.log(s),h.WithdrawSucess=!0,g=s.data}catch(a){console.log(a),h.WithdrawSucess=!1,g=a}return g}},2948:function(e,t,a){a.r(t),a.d(t,{default:function(){return h}});var s=a(7313),r=a(7829),n=a(4631),o=a(5480),i=a(9099),c=a(6244),u=a(4211),l=a(4285),d=a(4734),g=a(6417);function h(){const{user:e}=(0,l.Z)(),[t,a]=s.useState(0),[h,f]=s.useState(""),[S,w]=s.useState(!1),[y,m]=s.useState(""),[p,k]=s.useState(!1),[R,x]=s.useState(!1);console.log(p);return(0,g.jsxs)(r.Z,{component:"form",noValidate:!0,autoComplete:"off",sx:{display:"flex",flexDirection:"column",background:"white",width:"fit-content",p:4,borderRadius:"20px"},children:[(0,g.jsx)(n.Z,{disabled:!0,id:"outlined-error-helper-text",label:"Wallet Balance",value:`$${null===e||void 0===e?void 0:e.wallet_amount}`,sx:{mt:2,width:{sm:200,md:300},"& .MuiInputBase-root":{}}}),(0,g.jsx)(n.Z,{id:"outlined-error-helper-text",label:"Withdraw Amount",helperText:S?"Incorrect entry.":"",error:S,type:"number",value:t,onChange:e=>{const t=parseInt(e.target.value);a(t),w(!1),m("")},sx:{mt:2,width:"300px"}}),S&&(0,g.jsx)(o.Z,{error:S,children:"Withdraw amount cannot exceed wallet balance or be negative."}),y&&(0,g.jsx)(o.Z,{error:!0,children:y}),(0,g.jsx)(n.Z,{id:"withdraw-wallet-address",label:"Withdraw Address",helperText:S?"Incorrect entry.":"",error:S,type:"text",value:h,onChange:e=>{const t=parseInt(e.target.value);f(t),w(!1),m("")},sx:{mt:2,width:"300px"}}),(0,g.jsx)(i.Z,{variant:"contained",disableElevation:!0,sx:{mt:2,width:"200px"},onClick:async()=>{if(t>e.wallet_amount)w(!0);else if(t<0)w(!0);else try{await(0,d.nU)(t,h),k(!0),m(""),x(!0)}catch(S){m("Error submitting withdrawal request.")}},children:"Submit"}),(0,g.jsx)(c.Z,{open:R,autoHideDuration:3e3,onClose:()=>{x(!1)},anchorOrigin:{vertical:"bottom",horizontal:"left"},children:(0,g.jsx)(u.Z,{style:{backgroundColor:"green"},message:"Withdrawal request submitted successfully."})})]})}}}]);