"use strict";(self.webpackChunkRoyal_Magic=self.webpackChunkRoyal_Magic||[]).push([[50],{5050:function(e,n,r){r.r(n),r.d(n,{default:function(){return L}});var s=r(9860),t=r(4813),o=r(9019),i=r(5898),a=r(1113),l=r(9536),d=r(547),c=r(5602),m=r(7313),u=r(7890),h=r(9466),x=r(7829),p=r(1685),w=r(1550),j=r(3306),Z=r(9914),g=r(5480),f=r(9099),P=r(6149),y=r(3604),b=r(6467),v=r(3366),S=r(7462),C=r(3061),I=r(1921),B=r(7592),k=r(5469),E=r(7430),A=r(2298);function F(e){return(0,A.Z)("MuiDialogActions",e)}(0,E.Z)("MuiDialogActions",["root","spacing"]);var M=r(6417);const N=["className","disableSpacing"],R=(0,B.ZP)("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:r}=e;return[n.root,!r.disableSpacing&&n.spacing]}})((e=>{let{ownerState:n}=e;return(0,S.Z)({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!n.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}})}));var W=m.forwardRef((function(e,n){const r=(0,k.Z)({props:e,name:"MuiDialogActions"}),{className:s,disableSpacing:t=!1}=r,o=(0,v.Z)(r,N),i=(0,S.Z)({},r,{disableSpacing:t}),a=(e=>{const{classes:n,disableSpacing:r}=e,s={root:["root",!r&&"spacing"]};return(0,I.Z)(s,F,n)})(i);return(0,M.jsx)(R,(0,S.Z)({className:(0,C.Z)(a.root,s),ownerState:i,ref:n},o))})),D=r(4285),O=r(3463),H=r(9429),T=r(2889),U=r(976);var _=e=>{let{...n}=e;const[r,t]=(0,m.useState)(!1),[l,d]=(0,m.useState)(300),[c,v]=(0,m.useState)({email:!1,password:!1,otp:!1,newPassword:!1,confirmPassword:!1}),[S,C]=(0,m.useState)(""),[I,B]=(0,m.useState)(""),[k,E]=(0,m.useState)(""),[A,F]=(0,m.useState)(""),[N]=(0,m.useState)({}),R=(0,s.Z)(),_=(0,T.Z)(),{confirmOptPassword:q,forgotPassword:z}=(0,D.Z)(),L=(0,u.s0)(),V=()=>{t(!0)},J=()=>{t(!1)};(0,m.useEffect)((()=>{let e;return r&&(e=setInterval((()=>{d((e=>e-1))}),1e3)),()=>{clearInterval(e)}}),[r]),(0,m.useEffect)((()=>{0===l&&J()}),[l]);const G=e=>()=>{v((n=>({...n,[e]:!0})))},K=()=>{r&&V()};return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(o.ZP,{container:!0,direction:"column",justifyContent:"center",spacing:2,children:(0,M.jsx)(o.ZP,{item:!0,xs:12,container:!0,alignItems:"center",justifyContent:"center",children:(0,M.jsx)(x.Z,{sx:{mb:2},children:(0,M.jsx)(a.Z,{variant:"subtitle1",children:"Forgot Password"})})})}),(0,M.jsx)(H.J9,{initialValues:{email:"info@royalmagic.live",submit:null},validationSchema:O.Ry().shape({email:O.Z_().email("Must be a valid email").max(255).required("Email is required")}),onSubmit:async(e,n)=>{let{setErrors:r,setStatus:s,setSubmitting:t}=n;try{console.log(e),await z(e.email),F(e.email),_.current&&(s({success:!0}),t(!1)),V()}catch(o){console.error(o),_.current&&(s({success:!1}),r({submit:o.message}),t(!1))}},children:e=>{let{errors:r,handleChange:s,handleSubmit:t,isSubmitting:o,values:l}=e;return(0,M.jsx)(p.Z,{onClickAway:K,children:(0,M.jsxs)("form",{noValidate:!0,onSubmit:t,...n,children:[(0,M.jsxs)(w.Z,{fullWidth:!0,error:Boolean(c.email&&r.email),sx:{...R.typography.customInput},children:[(0,M.jsx)(j.Z,{htmlFor:"outlined-adornment-email-login",children:"Email Address / Username"}),(0,M.jsx)(Z.Z,{id:"outlined-adornment-email-login",type:"email",value:l.email,name:"email",onBlur:G("email"),onChange:s,label:"Email Address / Username",inputProps:{}}),c.email&&r.email&&(0,M.jsx)(g.Z,{error:!0,id:"standard-weight-helper-text-email-login",children:r.email})]}),(0,M.jsxs)(i.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",spacing:1,children:[(0,M.jsx)("div",{}),(0,M.jsx)(a.Z,{variant:"subtitle1",color:"secondary",sx:{textDecoration:"none",cursor:"pointer"},component:h.rU,to:"/login",children:"Login"})]}),r.submit&&(0,M.jsx)(x.Z,{sx:{mt:3},children:(0,M.jsx)(g.Z,{error:!0,children:r.submit})}),(0,M.jsx)(x.Z,{sx:{mt:2},children:(0,M.jsx)(U.Z,{children:(0,M.jsx)(f.Z,{disableElevation:!0,disabled:o,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"secondary",children:"Forgot Password"})})})]})})}}),(0,M.jsxs)(P.Z,{open:r,onClose:J,children:[(0,M.jsx)(y.Z,{children:"Forgot Password"}),(0,M.jsxs)(b.Z,{children:[(0,M.jsxs)(w.Z,{fullWidth:!0,error:Boolean(c.otp&&N.otp),sx:{...R.typography.customInput},children:[(0,M.jsx)(j.Z,{htmlFor:"outlined-adornment-otp",children:"OTP"}),(0,M.jsx)(Z.Z,{id:"outlined-adornment-otp",type:"text",value:S,name:"otp",onBlur:G("otp"),onChange:e=>C(e.target.value),label:"OTP",inputProps:{}}),c.otp&&N.otp&&(0,M.jsx)(g.Z,{error:!0,id:"standard-weight-helper-text-otp",children:N.otp})]}),(0,M.jsxs)(a.Z,{variant:"body2",sx:{marginBottom:1},children:["OTP will expire in: ",Math.floor(l/60),":",l%60<10?"0"+l%60:l%60]}),(0,M.jsxs)(w.Z,{fullWidth:!0,error:Boolean(c.newPassword&&N.newPassword),sx:{...R.typography.customInput},children:[(0,M.jsx)(j.Z,{htmlFor:"outlined-adornment-new-password",children:"New Password"}),(0,M.jsx)(Z.Z,{id:"outlined-adornment-new-password",type:"password",value:I,name:"newPassword",onBlur:G("newPassword"),onChange:e=>B(e.target.value),label:"New Password",inputProps:{}}),c.newPassword&&N.newPassword&&(0,M.jsx)(g.Z,{error:!0,id:"outlined-adornment-new-password-helper-text",children:N.newPassword}),!c.newPassword&&(0,M.jsx)(g.Z,{id:"standard-weight-helper-text-new-password",children:"Enter your new password"}),N.newPassword&&(0,M.jsx)(g.Z,{error:!0,id:"outlined-adornment-new-password-helper-text",children:N.newPassword})]}),(0,M.jsxs)(w.Z,{fullWidth:!0,error:Boolean(c.confirmPassword&&N.confirmPassword),sx:{...R.typography.customInput},children:[(0,M.jsx)(j.Z,{htmlFor:"outlined-adornment-confirm-password",children:"Confirm Password"}),(0,M.jsx)(Z.Z,{id:"outlined-adornment-confirm-password",type:"password",value:k,name:"confirmPassword",onBlur:G("confirmPassword"),onChange:e=>E(e.target.value),label:"Confirm Password",inputProps:{}}),c.confirmPassword&&N.confirmPassword&&(0,M.jsx)(g.Z,{error:!0,id:"outlined-adornment-confirm-password-helper-text",children:N.confirmPassword}),!c.confirmPassword&&(0,M.jsx)(g.Z,{id:"standard-weight-helper-text-confirm-password",children:"Confirm your new password"}),N.confirmPassword&&(0,M.jsx)(g.Z,{error:!0,id:"outlined-adornment-new-password-helper-text",children:N.confirmPassword})]}),(0,M.jsxs)(W,{children:[(0,M.jsx)(f.Z,{onClick:J,color:"primary",variant:"outlined",children:"Cancel"}),(0,M.jsx)(f.Z,{color:"primary",variant:"contained",onClick:async()=>{try{if(console.log(123),I!=k)throw console.log("password should match"),"password should match";await q(S,I,k,A),L("/login")}catch(e){console.error(e)}},children:"Submit New Password"})]})]})]})]})},q=r(1926),z=r(5184);var L=()=>{const e=(0,s.Z)(),n=(0,t.Z)(e.breakpoints.down("md"));return(0,M.jsx)(d.Z,{children:(0,M.jsxs)(o.ZP,{container:!0,direction:"column",justifyContent:"flex-end",sx:{minHeight:"100vh"},children:[(0,M.jsx)(o.ZP,{item:!0,xs:12,children:(0,M.jsx)(o.ZP,{container:!0,justifyContent:"center",alignItems:"center",sx:{minHeight:"calc(100vh - 68px)"},children:(0,M.jsx)(o.ZP,{item:!0,sx:{m:{xs:1,sm:3},mb:0},children:(0,M.jsx)(c.Z,{children:(0,M.jsxs)(o.ZP,{container:!0,spacing:2,alignItems:"center",justifyContent:"center",children:[(0,M.jsx)(o.ZP,{item:!0,sx:{mb:3},children:(0,M.jsx)(q.Z,{})}),(0,M.jsx)(o.ZP,{item:!0,xs:12,children:(0,M.jsx)(o.ZP,{container:!0,direction:n?"column-reverse":"row",alignItems:"center",justifyContent:"center",children:(0,M.jsx)(o.ZP,{item:!0,children:(0,M.jsxs)(i.Z,{alignItems:"center",justifyContent:"center",spacing:1,children:[(0,M.jsx)(a.Z,{color:e.palette.secondary.main,gutterBottom:!0,variant:n?"h3":"h2",children:"Hi, Welcome Back"}),(0,M.jsx)(a.Z,{variant:"caption",fontSize:"16px",textAlign:n?"center":"inherit",children:"Enter your email to continue"})]})})})}),(0,M.jsx)(o.ZP,{item:!0,xs:12,children:(0,M.jsx)(_,{})}),(0,M.jsx)(o.ZP,{item:!0,xs:12,children:(0,M.jsx)(l.Z,{})})]})})})})}),(0,M.jsx)(o.ZP,{item:!0,xs:12,sx:{m:3,mt:1},children:(0,M.jsx)(z.Z,{})})]})})}}}]);