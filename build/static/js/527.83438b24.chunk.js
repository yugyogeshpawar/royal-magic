"use strict";(self.webpackChunkRoyal_Magic=self.webpackChunkRoyal_Magic||[]).push([[527],{5527:function(e,r,n){n.r(r),n.d(r,{default:function(){return z}});var s=n(9860),t=n(4813),o=n(9019),i=n(5898),a=n(1113),l=n(9536),d=n(547),c=n(5602),m=n(7313),u=n(7890),h=n(9466),x=n(7829),p=n(1685),w=n(1550),j=n(3306),Z=n(9914),g=n(5480),P=n(9099),f=n(4469),y=n(7462),v=n(3366),b=n(3061),C=n(1921),S=n(7592),I=n(5469),B=n(3174),k=n(3909),E=n(6417);const F=["className","id"],M=(0,S.ZP)(a.Z,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,r)=>r.root})({padding:"16px 24px",flex:"0 0 auto"});var N=m.forwardRef((function(e,r){const n=(0,I.Z)({props:e,name:"MuiDialogTitle"}),{className:s,id:t}=n,o=(0,v.Z)(n,F),i=n,a=(e=>{const{classes:r}=e;return(0,C.Z)({root:["root"]},B.a,r)})(i),{titleId:l=t}=m.useContext(k.Z);return(0,E.jsx)(M,(0,y.Z)({component:"h2",className:(0,b.Z)(a.root,s),ownerState:i,ref:r,variant:"h6",id:l},o))})),R=n(6467),W=n(4117),T=n(4285),A=n(3463),O=n(9429),D=n(2889),H=n(976);var U=e=>{let{...r}=e;const[n,t]=(0,m.useState)(!1),[l,d]=(0,m.useState)(300),[c,y]=(0,m.useState)({email:!1,password:!1,otp:!1,newPassword:!1,confirmPassword:!1}),[v,b]=(0,m.useState)(""),[C,S]=(0,m.useState)(""),[I,B]=(0,m.useState)(""),[k,F]=(0,m.useState)(""),[M]=(0,m.useState)({}),U=(0,s.Z)(),_=(0,D.Z)(),{confirmOptPassword:q,forgotPassword:z}=(0,T.Z)(),V=(0,u.s0)(),J=()=>{t(!0)},L=()=>{t(!1)};(0,m.useEffect)((()=>{let e;return n&&(e=setInterval((()=>{d((e=>e-1))}),1e3)),()=>{clearInterval(e)}}),[n]),(0,m.useEffect)((()=>{0===l&&L()}),[l]);const G=e=>()=>{y((r=>({...r,[e]:!0})))},K=()=>{n&&J()};return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(o.ZP,{container:!0,direction:"column",justifyContent:"center",spacing:2,children:(0,E.jsx)(o.ZP,{item:!0,xs:12,container:!0,alignItems:"center",justifyContent:"center",children:(0,E.jsx)(x.Z,{sx:{mb:2},children:(0,E.jsx)(a.Z,{variant:"subtitle1",children:"Forgot Password"})})})}),(0,E.jsx)(O.J9,{initialValues:{email:"info@royalmagic.live",submit:null},validationSchema:A.Ry().shape({email:A.Z_().email("Must be a valid email").max(255).required("Email is required")}),onSubmit:async(e,r)=>{let{setErrors:n,setStatus:s,setSubmitting:t}=r;try{console.log(e),await z(e.email),F(e.email),_.current&&(s({success:!0}),t(!1)),J()}catch(o){console.error(o),_.current&&(s({success:!1}),n({submit:o.message}),t(!1))}},children:e=>{let{errors:n,handleChange:s,handleSubmit:t,isSubmitting:o,values:l}=e;return(0,E.jsx)(p.Z,{onClickAway:K,children:(0,E.jsxs)("form",{noValidate:!0,onSubmit:t,...r,children:[(0,E.jsxs)(w.Z,{fullWidth:!0,error:Boolean(c.email&&n.email),sx:{...U.typography.customInput},children:[(0,E.jsx)(j.Z,{htmlFor:"outlined-adornment-email-login",children:"Email Address / Username"}),(0,E.jsx)(Z.Z,{id:"outlined-adornment-email-login",type:"email",value:l.email,name:"email",onBlur:G("email"),onChange:s,label:"Email Address / Username",inputProps:{}}),c.email&&n.email&&(0,E.jsx)(g.Z,{error:!0,id:"standard-weight-helper-text-email-login",children:n.email})]}),(0,E.jsxs)(i.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",spacing:1,children:[(0,E.jsx)("div",{}),(0,E.jsx)(a.Z,{variant:"subtitle1",color:"secondary",sx:{textDecoration:"none",cursor:"pointer"},component:h.rU,to:"/login",children:"Login"})]}),n.submit&&(0,E.jsx)(x.Z,{sx:{mt:3},children:(0,E.jsx)(g.Z,{error:!0,children:n.submit})}),(0,E.jsx)(x.Z,{sx:{mt:2},children:(0,E.jsx)(H.Z,{children:(0,E.jsx)(P.Z,{disableElevation:!0,disabled:o,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"secondary",children:"Forgot Password"})})})]})})}}),(0,E.jsxs)(f.Z,{open:n,onClose:L,children:[(0,E.jsx)(N,{children:"Forgot Password"}),(0,E.jsxs)(R.Z,{children:[(0,E.jsxs)(w.Z,{fullWidth:!0,error:Boolean(c.otp&&M.otp),sx:{...U.typography.customInput},children:[(0,E.jsx)(j.Z,{htmlFor:"outlined-adornment-otp",children:"OTP"}),(0,E.jsx)(Z.Z,{id:"outlined-adornment-otp",type:"text",value:v,name:"otp",onBlur:G("otp"),onChange:e=>b(e.target.value),label:"OTP",inputProps:{}}),c.otp&&M.otp&&(0,E.jsx)(g.Z,{error:!0,id:"standard-weight-helper-text-otp",children:M.otp})]}),(0,E.jsxs)(a.Z,{variant:"body2",sx:{marginBottom:1},children:["OTP will expire in: ",Math.floor(l/60),":",l%60<10?"0"+l%60:l%60]}),(0,E.jsxs)(w.Z,{fullWidth:!0,error:Boolean(c.newPassword&&M.newPassword),sx:{...U.typography.customInput},children:[(0,E.jsx)(j.Z,{htmlFor:"outlined-adornment-new-password",children:"New Password"}),(0,E.jsx)(Z.Z,{id:"outlined-adornment-new-password",type:"password",value:C,name:"newPassword",onBlur:G("newPassword"),onChange:e=>S(e.target.value),label:"New Password",inputProps:{}}),c.newPassword&&M.newPassword&&(0,E.jsx)(g.Z,{error:!0,id:"outlined-adornment-new-password-helper-text",children:M.newPassword}),!c.newPassword&&(0,E.jsx)(g.Z,{id:"standard-weight-helper-text-new-password",children:"Enter your new password"}),M.newPassword&&(0,E.jsx)(g.Z,{error:!0,id:"outlined-adornment-new-password-helper-text",children:M.newPassword})]}),(0,E.jsxs)(w.Z,{fullWidth:!0,error:Boolean(c.confirmPassword&&M.confirmPassword),sx:{...U.typography.customInput},children:[(0,E.jsx)(j.Z,{htmlFor:"outlined-adornment-confirm-password",children:"Confirm Password"}),(0,E.jsx)(Z.Z,{id:"outlined-adornment-confirm-password",type:"password",value:I,name:"confirmPassword",onBlur:G("confirmPassword"),onChange:e=>B(e.target.value),label:"Confirm Password",inputProps:{}}),c.confirmPassword&&M.confirmPassword&&(0,E.jsx)(g.Z,{error:!0,id:"outlined-adornment-confirm-password-helper-text",children:M.confirmPassword}),!c.confirmPassword&&(0,E.jsx)(g.Z,{id:"standard-weight-helper-text-confirm-password",children:"Confirm your new password"}),M.confirmPassword&&(0,E.jsx)(g.Z,{error:!0,id:"outlined-adornment-new-password-helper-text",children:M.confirmPassword})]}),(0,E.jsxs)(W.Z,{children:[(0,E.jsx)(P.Z,{onClick:L,color:"primary",variant:"outlined",children:"Cancel"}),(0,E.jsx)(P.Z,{color:"primary",variant:"contained",onClick:async()=>{try{if(console.log(123),C!=I)throw console.log("password should match"),"password should match";await q(v,C,I,k),V("/login")}catch(e){console.error(e)}},children:"Submit New Password"})]})]})]})]})},_=n(1926),q=n(5184);var z=()=>{const e=(0,s.Z)(),r=(0,t.Z)(e.breakpoints.down("md"));return(0,E.jsx)(d.Z,{children:(0,E.jsxs)(o.ZP,{container:!0,direction:"column",justifyContent:"flex-end",sx:{minHeight:"100vh"},children:[(0,E.jsx)(o.ZP,{item:!0,xs:12,children:(0,E.jsx)(o.ZP,{container:!0,justifyContent:"center",alignItems:"center",sx:{minHeight:"calc(100vh - 68px)"},children:(0,E.jsx)(o.ZP,{item:!0,sx:{m:{xs:1,sm:3},mb:0},children:(0,E.jsx)(c.Z,{children:(0,E.jsxs)(o.ZP,{container:!0,spacing:2,alignItems:"center",justifyContent:"center",children:[(0,E.jsx)(o.ZP,{item:!0,sx:{mb:3},children:(0,E.jsx)(_.Z,{})}),(0,E.jsx)(o.ZP,{item:!0,xs:12,children:(0,E.jsx)(o.ZP,{container:!0,direction:r?"column-reverse":"row",alignItems:"center",justifyContent:"center",children:(0,E.jsx)(o.ZP,{item:!0,children:(0,E.jsxs)(i.Z,{alignItems:"center",justifyContent:"center",spacing:1,children:[(0,E.jsx)(a.Z,{color:e.palette.secondary.main,gutterBottom:!0,variant:r?"h3":"h2",children:"Hi, Welcome Back"}),(0,E.jsx)(a.Z,{variant:"caption",fontSize:"16px",textAlign:r?"center":"inherit",children:"Enter your email to continue"})]})})})}),(0,E.jsx)(o.ZP,{item:!0,xs:12,children:(0,E.jsx)(U,{})}),(0,E.jsx)(o.ZP,{item:!0,xs:12,children:(0,E.jsx)(l.Z,{})})]})})})})}),(0,E.jsx)(o.ZP,{item:!0,xs:12,sx:{m:3,mt:1},children:(0,E.jsx)(q.Z,{})})]})})}}}]);